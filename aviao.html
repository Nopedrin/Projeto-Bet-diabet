<!DOCTYPE html>
<html>
    <head>
        <title>DiaBET - Aposte com o cora√ß√£o!</title>
        <link rel="stylesheet" href="./css/pages/aviao/aviao.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

    </head>
    <body>
        <section class="home">
            <a href="..\Home\diabet.html">
                <img src="https://media.discordapp.net/attachments/1408265472209846302/1422599375242264727/raw.png?ex=68dd4269&is=68dbf0e9&hm=7ce20fc25e23136d3c5e959f04dc75fc9a5e57f7e33987554802e9d20deb5dec&=&format=webp&quality=lossless&width=385&height=578" />
            </a>
                <h1>DiaBET</h1>
            <nav class="botoesHome">
                <a href="C:\Users\duatg\Desktop\diabet\Home\diabet.html">Menu</a>
                <a>Minha conta</a>
            </nav>
        </section>
        <div class="crash-game">
            <h1>‚úàÔ∏è Crash - Avi√£ozinho</h1>
            <div class="game-area">
                <img id="plane" src="https://cdn-icons-png.flaticon.com/512/870/870194.png" alt="avi√£o">
                <div id="multiplier">1.00x</div>
            </div>
            <div class="controls">
                <button id="startBtn">Come√ßar Voo</button>
                <button id="stopBtn" disabled>Parar Aposta</button>
            </div>
            <p id="resultado"></p>
        </div>
        <section class="rodaPe">
            <p>¬© 2025 Alunos da Proz - Todos os direitos reservados.</p>
            <br>
            <p>Precisa ler tudo que ta no site mesmo?</p>
        </section>
    </body>
    <script>
        const plane = document.getElementById('plane');
        const multiplierDisplay = document.getElementById('multiplier');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const resultado = document.getElementById('resultado');

        let animation;
        let currentMultiplier = 1;
        let crashPoint = 0;
        let posX = 0;
        let posY = 0;
        let stoppedEarly = false;

        function gerarCrashPoint() {
            const r = Math.random();
            const point = 1 + (-Math.log(1 - r) * 1,1);
            return parseFloat(Math.min(point, 20).toFixed(2));
        }
        function iniciarVoo() {
            startBtn.disabled = true;
            stopBtn.disabled = false;
            resultado.textContent = "";
            stoppedEarly = false;

            posX = 0;
            posY = 0;
            plane.style.left = "0%";
            plane.style.bottom = "0%";
            plane.style.transform = "rotate(20deg)";
            currentMultiplier = 1;
            multiplierDisplay.textContent = "1.00x";

            crashPoint = gerarCrashPoint();
            console.log("Crash em:", crashPoint);

            animation = setInterval(() => {
                currentMultiplier += 0.01; // sobe devagar
                posX += 0.2; // movimento horizontal
                posY += 0.12; // movimento vertical

                plane.style.left = posX + "%";
                plane.style.bottom = posY + "%";
                multiplierDisplay.textContent = currentMultiplier.toFixed(2) + "x";

                // verifica se crashou
                if (currentMultiplier >= crashPoint && !stoppedEarly) {
                clearInterval(animation);
                crash();
                }

                // se saiu da tela, considera que crashou
                if (posX > 95 || posY > 85) {
                clearInterval(animation);
                crashPoint = currentMultiplier; // registra onde crashou
                crash();
                }
            }, 60);
        }

    function pararAposta() {
      stoppedEarly = true;
      clearInterval(animation);
      resultado.textContent = `‚úÖ Voc√™ retirou em ${currentMultiplier.toFixed(2)}x`;
      plane.style.transform = "rotate(0deg)";
      stopBtn.disabled = true;
      startBtn.disabled = false;
    }

    function crash() {
      resultado.textContent = `üí• Crash em ${crashPoint.toFixed(2)}x`;
      plane.src = "https://cdn-icons-png.flaticon.com/512/2279/2279022.png";
      multiplierDisplay.textContent = "CRASH!";
      stopBtn.disabled = true;
      startBtn.disabled = false;

      setTimeout(() => {
        plane.src = "https://cdn-icons-png.flaticon.com/512/870/870194.png";
        plane.style.left = "0%";
        plane.style.bottom = "0%";
      }, 1500);
    }

    startBtn.addEventListener('click', iniciarVoo);
    stopBtn.addEventListener('click', pararAposta);
  </script>
</html>
